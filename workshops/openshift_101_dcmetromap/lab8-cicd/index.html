<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Lab 8 - CI / CD Pipeline | Red Hat | Public Sector</title>

    
    
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly.min.css" />
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly-additions.min.css" />

    
    <link rel="stylesheet" href="/node_modules/highlight.js/styles/darkula.css" />

    
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/asciidoc.css" />
    <link rel="stylesheet" href="/css/custom.css" />
    <link rel="stylesheet" href="/css/toastr.min.css" />

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DL741MBBZQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-DL741MBBZQ');
    </script>

    
    <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery/dist/jquery.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/c3/c3.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/d3/d3.min.js"></script>

    
    
    <script src="/node_modules/patternfly/node_modules/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/drmonty-datatables-colvis/js/dataTables.colVis.js"></script>
    <script src="/node_modules/patternfly/node_modules/datatables.net-colreorder/js/dataTables.colReorder.js"></script>

    
    
    <script src="/node_modules/patternfly/dist/js/patternfly.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-combobox/js/bootstrap-combobox.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/moment/min/moment.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-select/dist/js/bootstrap-select.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-switch/dist/js/bootstrap-switch.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-treeview/dist/bootstrap-treeview.min.js"></script>

    
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery-match-height/dist/jquery.matchHeight-min.js"></script>
    
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/clip.js"></script>

    
    <script src="/js/toastr.min.js"></script>

    
    <script src="/node_modules/highlight.js/lib/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body class="">
    

<nav class="navbar navbar-default navbar-inverse navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">
      <svg width=150 height=auto id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145"><defs><style>.cls-1{fill:#e00;}.cls-2{fill:#fff;}</style></defs><path class="cls-1" d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/><path d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/><path class="cls-2" d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/></svg>
      </a>
    </div>
    <div class="collapse navbar-collapse navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        
        
          
            <li>
              <a href="/">Home</a>
            </li>
          
        
          
            <li>
              <a href="/about/">About</a>
            </li>
          
        
          
            <li>
              <a href="/contact/">Contact</a>
            </li>
          
        
          
            <li>
              <a href="https://www.redhat.com/en/events">Events</a>
            </li>
          
        
          
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Workshops <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                
                  <li>
                    <a href="/workshops/agile_integrations_ci/">Agile Integrations Workshop - Citizen Integrator</a>
                  </li>
                
                  <li>
                    <a href="/workshops/agile_integrations_dev/">Agile Integrations Workshop - Developer</a>
                  </li>
                
                  <li>
                    <a href="/workshops/ansible_automation/">Ansible Automation Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/ansible_tower_intro/">Ansible Tower - an Introduction</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_container_intro/">Container Security - A Practical Introduction</a>
                  </li>
                
                  <li>
                    <a href="/workshops/containers_101/">Containers 101 Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/secure_software_factory/">DevSecOps Workshop - Secure Software Factory</a>
                  </li>
                
                  <li>
                    <a href="/workshops/containers_the_hard_way/">Linux Containers the Hard Way</a>
                  </li>
                
                  <li>
                    <a href="/workshops/strangling_the_monolith/">Microservices Workshop - Strangling the Monolith</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_4_101/">OpenShift 4 101</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_4_101_dynatrace/">OpenShift 4 101 w/Dynatrace</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_serverless/">OpenShift Serverless</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_service_mesh/">OpenShift Service Mesh</a>
                  </li>
                
                  <li>
                    <a href="/workshops/rhel_8/">Red Hat Enterprise Linux 8</a>
                  </li>
                
                  <li>
                    <a href="/workshops/selinux_policy/">SELinux Policy Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_service_mesh_v1.0/">zOpenShift Service Mesh</a>
                  </li>
                
              </ul>
            </li>
          
        
          
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                alpha <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                
                  <li>
                    <a href="/workshops/alpha/ansible_with_rhocp_edge/">Applied Ansible Automation - Containerized Edge Workshop</a>
                  </li>
                
              </ul>
            </li>
          
        
          
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Retired <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                
                  <li>
                    <a href="/workshops/ansible_tower_azure/">Ansible Tower Workshop on Azure</a>
                  </li>
                
                  <li>
                    <a href="/workshops/cloudforms41/">CloudForms Workshops</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_containers/">Container Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/jdv_dev/">JBoss Data Virtualization Development</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_101_dcmetromap/">OpenShift 101 - DC Metro Map Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_openshift/">OpenShift Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/rhosp_101/">Red Hat OpenStack Platform 101</a>
                  </li>
                
                  <li>
                    <a href="/workshops/source_to_image/">Source to Image</a>
                  </li>
                
              </ul>
            </li>
          
        
      </ul>
    </div>
  </div>
</nav>



<div class="jumbotron jumbotron-page text-center">
  <h1>Lab 8 - CI / CD Pipeline</h1>
</div>

<div class="container">
  <div class="row">
    <p class="text-center">
      
      <a href="/workshops/openshift_101_dcmetromap">Return to Workshop</a>
    </p>

    








<nav>
  <ul class="pager">
    
    
    <li class="previous">
      <a href="/workshops/openshift_101_dcmetromap/lab7-labels/">&larr; Previous: Lab 7 - Labels</a>
    </li>
    
    
    
    
    <li class="next">
      <a href="/workshops/openshift_101_dcmetromap/lab9-bluegreen/">Next: Lab 9 - Blue | Green Deployment &rarr;</a>
    </li>
    
    
  </ul>
</nav>

    <h1 id="cicd-defined">CI/CD Defined</h1>
<p>In modern software projects many teams utilize the concept of Continuous Integration (CI) and Continuous Delivery (CD). By setting up a tool chain that continuously builds, tests, and stages software releases, a team can ensure that their product can be reliably released at any time. OpenShift can be an enabler in the creation and management of this tool chain.</p>
<p>In this lab we walk through creating a simple example of a CI/CD <a href="https://jenkins.io/doc/book/pipeline/">pipeline</a> utlizing Jenkins, all running on top of OpenShift! The Jenkins job will trigger OpenShift to build and deploy a test version of the application, validate that the deployment works, and then tag the test version into production.</p>
<blockquote>
<p>In the steps below replace &lsquo;YOUR#&rsquo; with your student number (if applicable).</p>
</blockquote>
<h2 id="create-a-new-project">Create a new project</h2>
<p>Create a new project named “cicd-<span class="userid">YOUR#</span>
”.</p>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsee8192bd08f7c45c9c9ac0e14f84ba81b" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsee8192bd08f7c45c9c9ac0e14f84ba81b" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <h2 id="create-the-project-cicd-span-classuseridyourspan">Create the project cicd-<span class="userid">YOUR#</span></h2>
<code>
$ oc new-project cicd-<span class="userid">YOUR#</span>
</code>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse1e9eefa0dadec717eca602b8559f2e80" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse1e9eefa0dadec717eca602b8559f2e80" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Browse to original landing page by clicking by "OpenShift Container Platform" in the top left hand corner
</blockquote>
<p><img src="../images/ocp-lab-cicd-new-project-landing.png" width="300"><br/></p>
<blockquote>
click "Create Project".
</blockquote>
<p><img src="../images/ocp-lab-cicd-new-project.png" width="400"><br/></p>
<blockquote>
Fill in the Name and Display Name of the project as "cicd-<span class="userid">YOUR#</span>
" and click "Create"
</blockquote>
<img src="../images/ocp-lab-cicd-new-project-detail.png" width="500"><br/>

    </div>
  </div>
</div>



</div>

<h2 id="use-the-cicd-hahahugoshortcode153s2hbhb-project">Use the cicd-<span class="userid">YOUR#</span>
 project</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ oc project cicd-<span class="userid">YOUR#</span>

</span></span></code></pre></div><h2 id="instantiate-a-jenkins-server-in-your-project">Instantiate a Jenkins server in your project</h2>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse76e03c948b589f5bc8ff4b5a0d0147c7" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse76e03c948b589f5bc8ff4b5a0d0147c7" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ oc new-app jenkins-ephemeral
</span></span></code></pre></div>
    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse323c1425c452fbe2e8a0cb4eb797059b" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse323c1425c452fbe2e8a0cb4eb797059b" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Click "Add to Project", select "Browse Catalog" tab and search on "jenkins". Then select "Jenkins (Ephemeral)".
</blockquote>
<p><img src="../images/ocp-lab-cicd-jenkins-instantiate.png" width="600"><br/></p>
<p><img src="../images/ocp-lab-cicd-jenkins-instantiate1.png" width="700"><br/></p>
<blockquote>
Select Next
</blockquote>
<p><img src="../images/ocp-lab-cicd-jenkins-instantiate2.png" width="700"><br/></p>
<blockquote>
Select the Project cicd-<span class="userid">YOUR#</span>
 from "Add to Project"
</blockquote>
<p><img src="../images/ocp-lab-cicd-jenkins-instantiate3.png" width="700"><br/></p>
<blockquote>
Select the Create
</blockquote>
<p><img src="../images/ocp-lab-cicd-jenkins-instantiate4.png" width="700"><br/></p>
<blockquote>
Click the "Continue to the project overview" link
</blockquote>
<p><img src="../images/ocp-lab-cicd-jenkins-overview.png" width="900"><br/></p>

    </div>
  </div>
</div>



</div>

<h2 id="create-a-sample-application-configuration">Create a sample application configuration</h2>
<blockquote>
<p>Use the &ldquo;oc create&rdquo; command to create a template resource by filename for a simple nodejs application:</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ oc create -f https://raw.githubusercontent.com/openshift/origin/master/examples/jenkins/application-template.json
</span></span></code></pre></div><h2 id="modify-the-sample-application-configuration-to-use-the-nodejs-red-hat-universal-base-image-ubihttpswwwredhatcomenblogintroducing-red-hat-universal-base-image">Modify the sample application configuration to use the Node.js <a href="https://www.redhat.com/en/blog/introducing-red-hat-universal-base-image">Red Hat Universal Base Image (UBI)</a></h2>
<blockquote>
<p>The template used above references a DEPRECATED: A Centos7 based NodeJS v0.10 image for use with OpenShift v3.</p>
</blockquote>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse3e0ec758ba39dfc4b4c7ca5b091e0254" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse3e0ec758ba39dfc4b4c7ca5b091e0254" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Find and replace "nodejs-010-centos7" with "nodejs-10"
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>oc edit template nodejs-helloworld-sample
</span></span></code></pre></div>
    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse01dbbc36c8c7a51dd9743cf592ed5806" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse01dbbc36c8c7a51dd9743cf592ed5806" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Click "Resources" and "Other Resources"
</blockquote>
<p><img src="../images/ocp-lab-cicd-app-resources.png" width="1000"><br/></p>
<blockquote>
From the "Choose a resource to list..." dropdown menu, select "Template"
</blockquote>
<p><img src="../images/ocp-lab-cicd-app-template.png" width="800"><br/></p>
<blockquote>
Click "Actions" and select "Edit YAML"
</blockquote>
<p><img src="../images/ocp-lab-cicd-app-resources-edit.png" width="800"><br/></p>
<blockquote>
Find and replace "nodejs-010-centos7" with "nodejs-10"
</blockquote>
<p><img src="../images/ocp-lab-cicd-app-edit-yaml-template.png" width="800"><br/></p>
<blockquote>
Click "Save"
</blockquote>

    </div>
  </div>
</div>



</div>

<h2 id="create-a-sample-application-from-template">Create a sample application from template</h2>
<blockquote>
<p>Use the &ldquo;oc process&rdquo; command to create a simple nodejs application from the template file:</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>oc process nodejs-helloworld-sample -p NAMESPACE<span style="color:#f92672">=</span>registry.access.redhat.com/ubi7 | oc create -f -
</span></span></code></pre></div><blockquote>
<p>Click on &ldquo;Overview&rdquo; within the OpenShift console to display the sample application configuration</p>
</blockquote>
<p><img src="../images/ocp-lab-cicd-app-create.png" width="900"><br/></p>
<h2 id="confirm-you-can-access-jenkins">Confirm you can access Jenkins</h2>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsec22e63d28bedcbbc7728c13e24b50818" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsec22e63d28bedcbbc7728c13e24b50818" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
<i class="fa fa-terminal"></i> Get the route to the Jenkins server. Your HOST/PORT values will differ
from the example below.
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ oc get route
</span></span><span style="display:flex;"><span>NAME       HOST/PORT                            PATH      SERVICES   PORT      TERMINATION     WILDCARD
</span></span><span style="display:flex;"><span>frontend   frontend-cicd.192.168.42.27.xip.io             frontend   &lt;all&gt;     edge            None
</span></span><span style="display:flex;"><span>jenkins    jenkins-cicd.192.168.42.27.xip.io              jenkins    &lt;all&gt;     edge/Redirect   None
</span></span></code></pre></div><p>Use Jenkins HOST/PORT to access through web browser</p>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse2f9adc49856f4893e0fcf0a239cd9b0c" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse2f9adc49856f4893e0fcf0a239cd9b0c" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Click the URL that is listed in the jenkins header
</blockquote>
<p><img src="../images/ocp-lab-cicd-jenkins-overview.png" width="900"><br/></p>

    </div>
  </div>
</div>



</div>

<blockquote>
<p>Select &ldquo;Login with OpenShift&rdquo; from Jenkins login page</p>
</blockquote>
<img src="../images/ocp-lab-cicd-jenkins-login-1.png" width="400">
</br>
<p>The OpenShift login page is displayed in a new browser tab.</p>
<blockquote>
<p>Login with your OpenShift user name and password</p>
</blockquote>
<img src="../images/ocp-login.png" width="600">
<br/>
<p>Once logged in, click the [Allow selected permissions] button and you should see the Jenkins dashboard.</p>
<h2 id="create-a-jenkins-pipeline-using-openshift">Create a Jenkins pipeline using OpenShift</h2>
<p>We will be creating the following very simple (4) stage Jenkins pipeline.</p>
<ol>
<li>Build the application from source.</li>
<li>Deploy the test version of the application.</li>
<li>Submit for approval, then tag the image for production, otherwise abort.</li>
<li>Scale the application.</li>
</ol>
<p>The first step is to create a build configuration that is based on a Jenkins pipeline strategy. The pipeline is written
in the GROOVY language using a Jenkins file format.</p>
<blockquote>
<p>Use the OpenShift CLI or Web Console to create an OpenShift build configuration object.</p>
</blockquote>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse44de831e3f83ea27c4d5d31d577cef78" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse44de831e3f83ea27c4d5d31d577cef78" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p>Copy and paste the following into bash.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>oc create -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: &#34;BuildConfig&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: &#34;v1&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: &#34;pipeline&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  strategy:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    jenkinsPipelineStrategy:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      jenkinsfile: |-
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        pipeline {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          agent any
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          stages {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            stage(&#39;buildFrontEnd&#39;) {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              steps {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                script {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  openshift.withCluster() {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    openshift.withProject() {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      openshift.selector(&#34;bc&#34;, &#34;frontend&#34;).startBuild(&#34;--wait=true&#34;, &#34;--follow&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            stage(&#39;deployFrontEnd&#39;) {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              steps {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                script {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  openshift.withCluster() {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    openshift.withProject() {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      openshift.selector(&#34;dc&#34;, &#34;frontend&#34;).rollout().latest()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            stage(&#39;promoteToProd&#39;) {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              steps {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                script {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  timeout(time: 15, unit: &#39;MINUTES&#39;) {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    input message: &#34;Promote to PROD?&#34;, ok: &#34;Promote&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  openshift.withCluster() {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    openshift.withProject() {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      openshift.tag(&#34;origin-nodejs-sample:latest&#34;, &#34;origin-nodejs-sample:prod&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            stage(&#39;scaleUp&#39;) {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              steps {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                script {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  openshift.withCluster() {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    openshift.withProject() {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      openshift.selector(&#34;dc&#34;, &#34;frontend-prod&#34;).scale(&#34;--replicas=2&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><p>Expected output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>buildconfig <span style="color:#e6db74">&#34;pipeline&#34;</span> created
</span></span></code></pre></div>
    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsef3f741393868e526d81914e65d61fdc9" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsef3f741393868e526d81914e65d61fdc9" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
<p>Use the following OpenShift build configuration to create the pipeline.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kind: <span style="color:#e6db74">&#34;BuildConfig&#34;</span>
</span></span><span style="display:flex;"><span>apiVersion: <span style="color:#e6db74">&#34;v1&#34;</span>
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>  name: <span style="color:#e6db74">&#34;pipeline&#34;</span>
</span></span><span style="display:flex;"><span>spec:
</span></span><span style="display:flex;"><span>  strategy:
</span></span><span style="display:flex;"><span>    jenkinsPipelineStrategy:
</span></span><span style="display:flex;"><span>      jenkinsfile: |-
</span></span><span style="display:flex;"><span>        pipeline <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          agent any
</span></span><span style="display:flex;"><span>          stages <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            stage<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;buildFrontEnd&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>              steps <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                script <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                  openshift.withCluster<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    openshift.withProject<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                      openshift.selector<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;bc&#34;</span>, <span style="color:#e6db74">&#34;frontend&#34;</span><span style="color:#f92672">)</span>.startBuild<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;--wait=true&#34;</span>, <span style="color:#e6db74">&#34;--follow&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            stage<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;deployFrontEnd&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>              steps <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                script <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                  openshift.withCluster<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    openshift.withProject<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                      openshift.selector<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;dc&#34;</span>, <span style="color:#e6db74">&#34;frontend&#34;</span><span style="color:#f92672">)</span>.rollout<span style="color:#f92672">()</span>.latest<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            stage<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;promoteToProd&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>              steps <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                script <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                  timeout<span style="color:#f92672">(</span>time: 15, unit: <span style="color:#e6db74">&#39;MINUTES&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    input message: <span style="color:#e6db74">&#34;Promote to PROD?&#34;</span>, ok: <span style="color:#e6db74">&#34;Promote&#34;</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                  openshift.withCluster<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    openshift.withProject<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                      openshift.tag<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;origin-nodejs-sample:latest&#34;</span>, <span style="color:#e6db74">&#34;origin-nodejs-sample:prod&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            stage<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;scaleUp&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>              steps <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                script <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                  openshift.withCluster<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    openshift.withProject<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                      openshift.selector<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;dc&#34;</span>, <span style="color:#e6db74">&#34;frontend-prod&#34;</span><span style="color:#f92672">)</span>.scale<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;--replicas=2&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span></code></pre></div><blockquote>
<p>Choose <em>Add to project</em> -&gt; <em>Import YAML</em></p>
</blockquote>
<img src="../images/ocp-lab-cicd-import-yaml.png" width="900">
<blockquote>
<p>Then copy and paste the above build configuration definition and choose &ldquo;Create&rdquo;.</p>
</blockquote>
<img src="../images/ocp-lab-cicd-import-yaml-dialog.png">

    </div>
  </div>
</div>



</div>

<h2 id="start-the-pipeline">Start the pipeline</h2>
<blockquote>
<p>Using the OpenShift Web Console, choose <em>Builds</em> -&gt; <em>Pipelines</em></p>
</blockquote>
<img src="../images/ocp-lab-cicd-start-pipeline.png" width="900">
<p>When the pipeline starts, OpenShift uploads the pipeline to the Jenkins server for execution. As it runs, the various stages trigger OpenShift to build and deploy the frontend microservice. After a Jenkins user approves the frontend deployment, Jenkins triggers OpenShift to tag the image stream with the &ldquo;:prod&rdquo; tag then scales the frontend-prod deployment for (2) replicas.</p>
<p>The Jenkins dashboard should indicate that a new build is executing.</p>
<img src="../images/ocp-lab-cicd-jenkins-build-exec-status.png">
<p>Back in the OpenShift Web Console, watch the pipeline execute. Once the &ldquo;deployFrontEnd&rdquo; stage completes, you should be able to visit the route for the frontend service in a web browser.</p>
<img src="../images/ocp-lab-cicd-pipeline-input.png">
<blockquote>
<p>Click on &ldquo;Input Required&rdquo; and you should get redirected to the Jenkins Web Console to
approve the promotion to production.</p>
</blockquote>
<img src="../images/ocp-lab-cicd-jenkins-promote.png">
<blockquote>
<p>Now return to the OpenShift Web Console and watch the pipeline finish.</p>
</blockquote>
<img src="../images/ocp-lab-cicd-pipeline-stages.png">
<blockquote>
<p>Confirm the <em>frontend-prod</em> has deployed 2 pods.</p>
</blockquote>
<img src="../images/ocp-lab-cicd-create-route.png">
<blockquote>
<p>Now <em>create a secure route</em> with TLS edge termination the <em>frontend-prod</em> service so the application can be visited.</p>
</blockquote>
<img src="../images/ocp-lab-cicd-route-tls.png">
<h2 id="confirm-both-the-test-and-production-services-are-available">Confirm both the test and production services are available</h2>
<blockquote>
<p>Browse to both services</p>
</blockquote>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse29f1baee9aa379382c0431043f997135" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse29f1baee9aa379382c0431043f997135" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p>Use the <code>oc get routes</code> command to get the HOST/PORT (URLs) needed to access the frontend and frontend-prod services. Your HOST/PORT values will differ
from the example below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ oc get routes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME            HOST/PORT                            PATH      SERVICES        PORT      TERMINATION     WILDCARD
</span></span><span style="display:flex;"><span>frontend        frontend-cicd-XX.apps.eadgbe.net                  frontend        &lt;all&gt;     edge            None
</span></span><span style="display:flex;"><span>frontend-prod   frontend-prod-cicd-XX.apps.eadgbe.net             frontend-prod   web       edge            None
</span></span></code></pre></div><p>Use a web browser to visit the HOST/PORT (URLs) for the frontend and frontend-prod services. Don&rsquo;t forget the <code>https://</code> prefix.</p>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsec5322746a6b72fe843fc12bc6de96479" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsec5322746a6b72fe843fc12bc6de96479" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Select services' links from Overview page.
</blockquote>
<p><img src="../images/ocp-lab-cicd-jenkins-app-overview.png"><br/></p>

    </div>
  </div>
</div>



</div>

<p>Service web page displayed:</p>
<p><img src="../images/ocp-lab-cicd-app-test.png"><br/></p>
<h2 id="edit-the-pipeline">Edit the pipeline.</h2>
<blockquote>
<p>Now make a change to the pipeline. For example, in the <em>scaleUp</em> stage, change the number
of replicas to 3.</p>
</blockquote>
<p>Technically speaking, a rebuild from source is not needed to scale up a deployment. We use
this simple example to illustrate how a pipeline may be edited within OpenShift.</p>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapseb9d3c3630956842315d73544da431eaf" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapseb9d3c3630956842315d73544da431eaf" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p>If you are comfortable using the <strong>vi</strong> editor:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>oc edit bc/pipeline
</span></span></code></pre></div>
    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse30db412f1d58f692f3d2a500777f6efd" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse30db412f1d58f692f3d2a500777f6efd" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <img src="../images/ocp-lab-cicd-pipeline-edit.png">

    </div>
  </div>
</div>



</div>

<blockquote>
<p>Save your changes and run the pipeline again to confirm the <em>frontend-prod</em> deployment has
deployed 3 pods.</p>
</blockquote>
<img src="../images/ocp-lab-cicd-app-3-pods.png">
<h1 id="summary">Summary</h1>
<p>In this lab you have very quickly and easily constructed a basic Build/Test/Deploy pipeline. Although our example was very basic it introduces you to a powerful DevOps feature of OpenShift through the leveraging of Jenkins. This can be extended to support complex real-world continuous delivery requirements. Read more about the use of Jenkins on OpenShift <a href="https://docs.openshift.com/enterprise/latest/using_images/other_images/jenkins.html">here</a> and more about Jenkins <a href="https://jenkins.io/doc">here</a>.</p>
<style>

 
.modal {
  display: none;  
  position: fixed;  
  z-index: 1;  
  left: 0;
  top: 0;
  width: 100%;  
  height: 100%;  
  overflow: auto;  
  background-color: rgb(0,0,0);  
  background-color: rgba(0,0,0,0.4);  
  -webkit-animation-name: fadeIn;  
  -webkit-animation-duration: 0.4s;
  animation-name: fadeIn;
  animation-duration: 0.4s
}

 
.modal-content {
  position: fixed;
  bottom: 0;
  background-color: #fefefe;
  width: 100%;
  -webkit-animation-name: slideIn;
  -webkit-animation-duration: 0.4s;
  animation-name: slideIn;
  animation-duration: 0.4s
}

 
.close {
  color: white;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

.modal-header {
  padding: 2px 16px;
  background-color: #000000;
  color: white;
}

.modal-body {padding: 2px 16px;}

.modal-footer {
  padding: 2px 16px;
  background-color: #000000;
  color: white;
}

 
@-webkit-keyframes slideIn {
  from {bottom: -300px; opacity: 0}
  to {bottom: 0; opacity: 1}
}

@keyframes slideIn {
  from {bottom: -300px; opacity: 0}
  to {bottom: 0; opacity: 1}
}

@-webkit-keyframes fadeIn {
  from {opacity: 0}
  to {opacity: 1}
}

@keyframes fadeIn {
  from {opacity: 0}
  to {opacity: 1}
}
</style>

<div id="myModal" class="modal">

  
  <div class="modal-content">
    <div class="modal-header">
      <span class="close">&times;</span>
      <h3>Workshop Details</h3>
    </div>
    <div class="modal-body">
<div class="row">
  <div class="col-lg-4 col-md-5 col-sm-12" id="workshopFooterDetails">
    <table>
      <tr>
        <td class="text-right"><b>Domain</b></td>
        <td><span class="domain"></span></td>
        <td rowspan="3">
        <img src="/images/Logo-Red_Hat-C-Standard-RGB-small.png" alt="Red Hat Logo" />
        </td>
      </tr>
      <tr>
        <td class="text-right"><b>Workshop</b></td>
        <td><span class="prefix"></span></td>
      </tr>
      <tr>
        <td class="text-right"><b>Student ID</b></td>
        <td><span class="userid"></span></td>
      </tr>
    </table>
  </div>
  <div class="col-lg-8 col-md-7 col-sm-12">
    <form id="footerForm" onsubmit="return false;" class="row" style="padding: 1.75rem 0 0 0;">
      <div class="form-group col-sm-6 col-md-6 col-lg-2">
        <label for="userid">Student ID</label>
        <select id="userid" name="userid">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
          <option value="24">24</option>
          <option value="25">25</option>
          <option value="26">26</option>
          <option value="27">27</option>
          <option value="28">28</option>
          <option value="29">29</option>
          <option value="30">30</option>
          <option value="31">31</option>
          <option value="32">32</option>
          <option value="33">33</option>
          <option value="34">34</option>
          <option value="35">35</option>
          <option value="36">36</option>
          <option value="37">37</option>
          <option value="38">38</option>
          <option value="39">39</option>
          <option value="40">40</option>
          <option value="41">41</option>
          <option value="42">42</option>
          <option value="43">43</option>
          <option value="44">44</option>
          <option value="45">45</option>
          <option value="46">46</option>
          <option value="47">47</option>
          <option value="48">48</option>
          <option value="49">49</option>
          <option value="50">50</option>
          <option value="51">51</option>
          <option value="52">52</option>
          <option value="53">53</option>
          <option value="54">54</option>
          <option value="55">55</option>
          <option value="56">56</option>
          <option value="57">57</option>
          <option value="58">58</option>
          <option value="59">59</option>
          <option value="60">60</option>
          <option value="61">61</option>
          <option value="62">62</option>
          <option value="63">63</option>
          <option value="64">64</option>
          <option value="65">65</option>
          <option value="66">66</option>
          <option value="67">67</option>
          <option value="68">68</option>
          <option value="69">69</option>
          <option value="70">70</option>
          <option value="71">71</option>
          <option value="72">72</option>
          <option value="73">73</option>
          <option value="74">74</option>
          <option value="75">75</option>
          <option value="76">76</option>
          <option value="77">77</option>
          <option value="78">78</option>
          <option value="79">79</option>
          <option value="80">80</option>
          <option value="81">81</option>
          <option value="82">82</option>
          <option value="83">83</option>
          <option value="84">84</option>
          <option value="85">85</option>
          <option value="86">86</option>
          <option value="87">87</option>
          <option value="88">88</option>
          <option value="89">89</option>
          <option value="90">90</option>
          <option value="91">91</option>
          <option value="92">92</option>
          <option value="93">93</option>
          <option value="94">94</option>
          <option value="95">95</option>
          <option value="96">96</option>
          <option value="97">97</option>
          <option value="98">98</option>
          <option value="99">99</option>
          <option value="100">100</option>
          <option value="101">101</option>
          <option value="102">102</option>
          <option value="103">103</option>
          <option value="104">104</option>
          <option value="105">105</option>
          <option value="106">106</option>
          <option value="107">107</option>
          <option value="108">108</option>
          <option value="109">109</option>
          <option value="110">110</option>
          <option value="111">111</option>
          <option value="112">112</option>
          <option value="113">113</option>
          <option value="114">114</option>
          <option value="115">115</option>
          <option value="116">116</option>
          <option value="117">117</option>
          <option value="118">118</option>
          <option value="119">119</option>
          <option value="120">120</option>
          <option value="121">121</option>
          <option value="122">122</option>
          <option value="123">123</option>
          <option value="124">124</option>
          <option value="125">125</option>
          <option value="126">126</option>
          <option value="127">127</option>
          <option value="128">128</option>
          <option value="129">129</option>
          <option value="130">130</option>
          <option value="131">131</option>
          <option value="132">132</option>
          <option value="133">133</option>
          <option value="134">134</option>
          <option value="135">135</option>
          <option value="136">136</option>
          <option value="137">137</option>
          <option value="138">138</option>
          <option value="139">139</option>
          <option value="140">140</option>
          <option value="141">141</option>
          <option value="142">142</option>
          <option value="143">143</option>
          <option value="144">144</option>
          <option value="145">145</option>
          <option value="146">146</option>
          <option value="147">147</option>
          <option value="148">148</option>
          <option value="149">149</option>
          <option value="150">150</option>
          <option value="151">151</option>
          <option value="152">152</option>
          <option value="153">153</option>
          <option value="154">154</option>
          <option value="155">155</option>
          <option value="156">156</option>
          <option value="157">157</option>
          <option value="158">158</option>
          <option value="159">159</option>
          <option value="160">160</option>
          <option value="161">161</option>
          <option value="162">162</option>
          <option value="163">163</option>
          <option value="164">164</option>
          <option value="165">165</option>
          <option value="166">166</option>
          <option value="167">167</option>
          <option value="168">168</option>
          <option value="169">169</option>
          <option value="170">170</option>
          <option value="171">171</option>
          <option value="172">172</option>
          <option value="173">173</option>
          <option value="174">174</option>
          <option value="175">175</option>
          <option value="176">176</option>
          <option value="177">177</option>
          <option value="178">178</option>
          <option value="179">179</option>
          <option value="180">180</option>
          <option value="181">181</option>
          <option value="182">182</option>
          <option value="183">183</option>
          <option value="184">184</option>
          <option value="185">185</option>
          <option value="186">186</option>
          <option value="187">187</option>
          <option value="188">188</option>
          <option value="189">189</option>
          <option value="190">190</option>
          <option value="191">191</option>
          <option value="192">192</option>
          <option value="193">193</option>
          <option value="194">194</option>
          <option value="195">195</option>
          <option value="196">196</option>
          <option value="197">197</option>
          <option value="198">198</option>
          <option value="199">199</option>
          <option value="200">200</option>
        </select>
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-4">
        <label for="domain">Domain</label>
        <select id="domain" name="domain">
          <option value="rhnaps.io">rhnaps.io</option>
          <option value="redhatgov.io">redhatgov.io</option>
          <option value="az.redhatgov.io">az.redhatgov.io</option>
          <option value="redhat-fierce.io">redhat-fierce.io</option>
          <option value="fiercesw.network">fiercesw.network</option>
          <option value="rhtps.io">rhtps.io</option>
          <option value="openshiftworkshop.com">openshiftworkshop.com</option>
          <option value="redhatpsmwsa.com">redhatpsmwsa.com</option>
          <option value="open.redhat.com">open.redhat.com</option>
          <option value="opentlc.com">opentlc.com</option>
          <option value="aroapp.io">aroapp.io</option>
          <option value="danclark.io">danclark.io</option>
        </select>
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-3">
        <label for="prefix">Workshop</label>
        <input id="prefix" name="prefix" type="text" size="16" class="form-control" placeholder="example" onkeyup="this.value = this.value.toLowerCase();this.value = this.value.replace(/[^-.a-zA-Z0-9]/g, '');"/>
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-3">
        <button type="submit" class="btn btn-primary form-control" style="margin-bottom:1rem;">Enter</button>
        <button type="reset" class="btn btn-default form-control">Default</button>
      </div>
    </form>
  </div>
</div>

    </div>
    <div class="modal-footer">
      <h3></h3>
    </div>
  </div>

</div>

<script type="text/javascript" src="/node_modules/js-cookie/src/js.cookie.js"></script>
<script type="text/javascript">

  
  var Cookies2 = Cookies.noConflict();

  var cookiePathArr = cleanArray(window.location.pathname.split('/'));
  var cookiePath = '/' + cookiePathArr[0] + '/' + cookiePathArr[1] + '/';

  function cleanArray(actual) {
    var newArray = new Array();
    for (var i = 0; i < actual.length; i++) {
      if (actual[i]) {
        newArray.push(actual[i]);
      }
    }
    return newArray;
  }
  function replaceClassText() {
    jQuery("span.domain").html(Cookies2.get("domain"));
    jQuery("span.userid").html(Cookies2.get("userid"));
    jQuery("span.prefix").html(Cookies2.get("prefix"));
  }
  function pageLoadWorkshopFooterTest() {
    
    if (Cookies2.get("domain") === undefined) {
      resetWorkshopFooter();
    }
    else {
      replaceClassText();
      setWorkshopFooterInputValues()
    }
  }
  function setWorkshopFooterData() {
    
    Cookies2.set("domain", jQuery("select#domain").val(), { path: cookiePath, expires: 7 } );
    Cookies2.set("prefix", jQuery("input#prefix").val().replace(/[^-.a-zA-Z0-9]/g, ''), { path: cookiePath, expires: 7 } );
    Cookies2.set("userid", jQuery("select#userid").val(), { path: cookiePath, expires: 7 } );
    replaceClassText();
    modal.style.display = "none";
  }
  function setWorkshopFooterInputValues() {
    jQuery("select#domain").val(Cookies2.get("domain"));
    jQuery("input#prefix").val(Cookies2.get("prefix"));
    jQuery("select#userid").val(Cookies2.get("userid"));
  }
  function resetWorkshopFooter() {
    
    jQuery("select#domain, select#userid").prop("selectedIndex", 0);
    jQuery("input#prefix").val(jQuery("input#prefix").attr('placeholder'));
    
    Cookies2.set("domain", jQuery("select#domain option").first().val(), { path: cookiePath, expires: 7 } ); 
    Cookies2.set("userid", jQuery("select#userid option").first().val(), { path: cookiePath, expires: 7 } ); 
    Cookies2.set("prefix", jQuery("input#prefix").val(), { path: cookiePath, expires: 7 } );
    
    
    replaceClassText();
  }




  function updateFooter(e){
    fieldName = '';

    switch(e.id) {
      case 'userid':
        fieldName = 'User Id';
        break;
      case 'domain':
        fieldName = 'Domain';
        break;
      case 'prefix':
        fieldName = 'Workshop';
        break;
      default:
        fieldName = 'unknown';
    }
    setWorkshopFooterData();
    toastr["success"](fieldName + " set to " + e.value);
  }

  jQuery(document).ready(function() {
    pageLoadWorkshopFooterTest();


    
    var input = document.getElementById("prefix");

    
    input.addEventListener("keyup", function(event) {
      
      if (event.keyCode === 13) {
        
        event.preventDefault();
        
        
        updateFooter(input);
      }
    });


    jQuery("form#footerForm").submit(function() {
      setWorkshopFooterData();
      return false; 
    });

    jQuery("form#footerForm").bind("reset", function() {
      resetWorkshopFooter();
      return true;
    });

    return false;
  });

</script>

<hr>
<h3>Workshop Details</h3>
    <table>
      <tr>
        <td class="text-right"><b>Domain</b></td>
        <td><span class="domain"></span></td>
        <td rowspan="3">
          <img src="/images/Logo-Red_Hat-C-Standard-RGB-small.png" alt="Red Hat Logo" />
        </td>
      </tr>
      <tr>
        <td class="text-right"><b>Workshop</b></td>
        <td><span class="prefix"></span></td>
      </tr>
      <tr>
        <td class="text-right"><b>Student ID</b></td>
        <td><span class="userid"></span></td>
      </tr>
    </table>
<button id="myBtn">Configure Workshop</button>
<hr>

<script>

var modal = document.getElementById("myModal");


var btn = document.getElementById("myBtn");


var span = document.getElementsByClassName("close")[0];


btn.onclick = function() {
  modal.style.display = "block";
}


span.onclick = function() {
  modal.style.display = "none";
}


window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
</script>




    








<nav>
  <ul class="pager">
    
    
    <li class="previous">
      <a href="/workshops/openshift_101_dcmetromap/lab7-labels/">&larr; Previous: Lab 7 - Labels</a>
    </li>
    
    
    
    
    <li class="next">
      <a href="/workshops/openshift_101_dcmetromap/lab9-bluegreen/">Next: Lab 9 - Blue | Green Deployment &rarr;</a>
    </li>
    
    
  </ul>
</nav>

    <p class="text-center">
      
      <a href="/workshops/openshift_101_dcmetromap">Return to Workshop</a>
    </p>
  </div>
</div>

    <div id="page-footer" class="container">
      <p class="text-center">
        Copyright &copy; 2024 Red Hat, Inc.
      </p>
    </div>
    <script type="text/javascript">
      if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
      }
    </script>
  </body>
</html>
